<p style='margin:0cm;margin-bottom:.0001pt;font-size: x-large;font-family:"Calibri",sans-serif;font-weight: bold;'>How I wrote my first telegram bot server using simple getUpdates?&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><u>Webhook:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>This method requires a registered public domain name to listen for messages from Telegram bot so I kept it for later once I have my personal basic bot.</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><u>Polling(getUpdates):</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>This method doesn&rsquo;t have any pre-requirements. So I started right away</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;font-weight: bold;'>Create a bot:</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>If new to telegram open an account using mobile number and create a bot by following&nbsp;<a href="https://core.telegram.org/bots#3-how-do-i-create-a-bot">https://core.telegram.org/bots#3-how-do-i-create-a-bot</a></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>(Optional) Install Desktop app and do a web login to your account to avoid switching between dev setup and phone</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;font-weight: bold;'>Run backend server:</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>After immense google search came up with tbot (github.com/yanzay/tbot) which is a good golang library for both Webhook and Polling with wrapper functions over telegram APIs and structs.</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>But it was a bit high level(that&rsquo;s what libraries are for!) where the basic http GET, POST queries are hidden within good wrappers which makes our work much easier. To learn on what really is happening behind the scenes I started with mkdir and a main.go file with the telegram API page in side&nbsp;<a href="https://core.telegram.org/bots/api">https://core.telegram.org/bots/api</a></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;font-weight: bold;'>Steps to copy any version code and run:</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>Set your bot token as environment variable TELEGRAM_TOKEN and run the code</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>$ export TELEGRAM_TOKEN=&lt;token&gt;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>$ go run main.go</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: large;font-family:"Calibri",sans-serif;'><u>Basic Version:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>The following is the first version of my main.go which does a http GET query on the telegram API &ldquo;getUpdates&rdquo;.</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">package</span><span style="font-size:12px;font-family: Menlo;">&nbsp;main</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">import</span><span style="font-size:12px;font-family: Menlo;">&nbsp;(</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;io/ioutil&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;log&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;net/http&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;os&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">func</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">main</span><span style="font-size:12px;font-family: Menlo;">() {</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">token</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= os.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Getenv</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;TELEGRAM_TOKEN&quot;</span><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;token ==&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Not a valid token&quot;</span><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">query</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;https://api.telegram.org/bot&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ token +&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;/getUpdates&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">resp</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= http.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Get</span><span style="font-size:12px;font-family: Menlo;">(query)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during Get: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">return</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">body</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= ioutil.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">ReadAll</span><span style="font-size:12px;font-family: Menlo;">(resp.Body)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= resp.Body.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Close</span><span style="font-size:12px;font-family: Menlo;">()</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during response body close: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Response: &quot;</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">string</span><span style="font-size:12px;font-family: Menlo;">(body))</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><u>OUTPUT:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>RATHEGS-M-C3XA:src rathegs$ go run main.go</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 17:01:10 Response: {&quot;ok&quot;:true,&quot;result&quot;:[{&quot;update_id&quot;:332016300,</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&quot;message&quot;:{&quot;message_id&quot;:54,&quot;from&quot;:{&quot;id&quot;:1060392138,&quot;is_bot&quot;:false,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;language_code&quot;:&quot;en&quot;},&quot;chat&quot;:{&quot;id&quot;:1060392138,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;type&quot;:&quot;private&quot;},&quot;date&quot;:1588406550,&quot;text&quot;:&quot;yo&quot;}},{&quot;update_id&quot;:332016301,</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&quot;message&quot;:{&quot;message_id&quot;:55,&quot;from&quot;:{&quot;id&quot;:1060392138,&quot;is_bot&quot;:false,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;language_code&quot;:&quot;en&quot;},&quot;chat&quot;:{&quot;id&quot;:1060392138,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;type&quot;:&quot;private&quot;},&quot;date&quot;:1588406550,&quot;text&quot;:&quot;hi&quot;}}]}</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: large;font-family:"Calibri",sans-serif;'><u>Dumb Reply Version:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>Once I saw the text I entered I am now curious to reply to this message and see it in my bot. This can be achived using &ldquo;sendMessage&rdquo; that takes two parameters as mandatory&nbsp;<span style='font-size:14px;font-family: "Lucida Grande", sans-serif;'>chat_id, text</span>.&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>chat_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;- should be taken from getUpdates response</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>text &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;- any string we want to send as reply</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>To parse the response I got from previous GET I created struct for the visible fields by keeping&nbsp;<span style='font-size:14px;font-family: "Lucida Grande", sans-serif;color: rgb(51, 51, 51);background-color: white;'>&nbsp;</span><a href="https://core.telegram.org/bots/api#getupdates"><span style='font-size:14px;font-family: "Lucida Grande", sans-serif;color: rgb(0, 136, 204);'>getUpdates</span></a> and <a href="https://core.telegram.org/bots/api#update"><span style='font-size:14px;font-family: "Lucida Grande", sans-serif;color: rgb(0, 136, 204);'>Update</span></a> object as reference and came up with this dumb reply version.</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">package</span><span style="font-size:12px;font-family: Menlo;">&nbsp;main</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">import</span><span style="font-size:12px;font-family: Menlo;">&nbsp;(</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;encoding/json&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;io/ioutil&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;log&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;net/http&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;net/url&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;os&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;strconv&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Response</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; OK &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">bool</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;ok&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Result []Update&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;result&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Update</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; UpdateID&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;update_id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Message &nbsp;Message&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;message&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Message</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; MessageID&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;message_id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; From &nbsp; &nbsp; &nbsp;User &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;from&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Chat &nbsp; &nbsp; &nbsp;Chat &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;Chat&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Date &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;date&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Text &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;text&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">User</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; ID &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; IsBot &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">bool</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;is_bot&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; FirstName &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;first_name&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; LanguageCode&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;language_code&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Chat</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; ID &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; FirstName&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;first_name&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Type &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;type&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">func</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">main</span><span style="font-size:12px;font-family: Menlo;">() {</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">token</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= os.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Getenv</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;TELEGRAM_TOKEN&quot;</span><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;token ==&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Not a valid token&quot;</span><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// getUpdates</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">query</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;https://api.telegram.org/bot&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ token +&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;/getUpdates&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">resp</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= http.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Get</span><span style="font-size:12px;font-family: Menlo;">(query)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during getUpdates: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">return</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">body</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= ioutil.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">ReadAll</span><span style="font-size:12px;font-family: Menlo;">(resp.Body)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= resp.Body.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Close</span><span style="font-size:12px;font-family: Menlo;">()</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during response body close: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Response: &quot;</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">string</span><span style="font-size:12px;font-family: Menlo;">(body))</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">data</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= Response{}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= json.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Unmarshal</span><span style="font-size:12px;font-family: Menlo;">(body, &amp;data)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during response unmarshal: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Response struct: &quot;</span><span style="font-size:12px;font-family: Menlo;">, data)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// sendMessage</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">reply</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;hello&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">query</span><span style="font-size:12px;font-family: Menlo;">&nbsp;=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;https://api.telegram.org/bot&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ token +&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;/sendMessage&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">for</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">_</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">update</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">range</span><span style="font-size:12px;font-family: Menlo;">&nbsp;data.Result {</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">chatID</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= update.Message.Chat.ID</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">vals</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= url.Values{}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; vals.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Set</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;chat_id&quot;</span><span style="font-size:12px;font-family: Menlo;">, strconv.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Itoa</span><span style="font-size:12px;font-family: Menlo;">(chatID))</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; vals.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Set</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;text&quot;</span><span style="font-size:12px;font-family: Menlo;">, reply)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">resp</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= http.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">PostForm</span><span style="font-size:12px;font-family: Menlo;">(query, vals)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Sending reply as &quot;</span><span style="font-size:12px;font-family: Menlo;">, reply,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot; to chatID &quot;</span><span style="font-size:12px;font-family: Menlo;">, chatID)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during sendMessage: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><u>OUTPUT:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>RATHEGS-M-C3XA:src rathegs$ go run main.go</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 17:36:42 Response: {&quot;ok&quot;:true,&quot;result&quot;:[{&quot;update_id&quot;:332016300,</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&quot;message&quot;:{&quot;message_id&quot;:54,&quot;from&quot;:{&quot;id&quot;:1060392138,&quot;is_bot&quot;:false,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;language_code&quot;:&quot;en&quot;},&quot;chat&quot;:{&quot;id&quot;:1060392138,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;type&quot;:&quot;private&quot;},&quot;date&quot;:1588406550,&quot;text&quot;:&quot;yo&quot;}},{&quot;update_id&quot;:332016301,</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&quot;message&quot;:{&quot;message_id&quot;:55,&quot;from&quot;:{&quot;id&quot;:1060392138,&quot;is_bot&quot;:false,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;language_code&quot;:&quot;en&quot;},&quot;chat&quot;:{&quot;id&quot;:1060392138,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;type&quot;:&quot;private&quot;},&quot;date&quot;:1588406550,&quot;text&quot;:&quot;hi&quot;}}]}</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 17:36:42 Response struct: {true [{332016300 {54 {1060392138 false Rathega en} {1060392138 Rathega private} 1588406550 yo}} {332016301 {55 {1060392138 false Rathega en} {1060392138 Rathega private} 1588406550 hi}}]}</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 17:36:42 Sending reply as hello to chatID 1060392138</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 17:36:43 Sending reply as hello to chatID 1060392138</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>The above program will send one <em>hello</em> to each of the text that was sent to our bot before.</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><img border="0" width="380" height="151" src="/Users/rathegs/Desktop/image1.png" alt="A screenshot of a cell phone screen with bot screen"></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: large;font-family:"Calibri",sans-serif;'><u>Smart Reply Version:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>Instead of sending <em>hello</em> to each of the message I want to greet persons who say only <em>hi</em> to bot. For all others I wanted to reply as <em>Say hi</em> message.</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>The same APIs are used as before with two changes</p>
<ul style="list-style-type: undefined;margin-left:undefined;">
    <li><span lang="EN-US">Before sending reply I added a little check on the text content</span></li>
    <li><span lang="EN-US">I am setting&nbsp;</span><span style='font-size:14px;font-family: "Lucida Grande", sans-serif;color: rgb(51, 51, 51);background-color: white;'>reply_to_message_id</span><span style='font-family: "Times New Roman", serif;'>&nbsp;</span>with the <span style='font-size:14px;font-family: "Lucida Grande", sans-serif;'>message_id</span><span style="font-size:14px;">&nbsp;</span>field from getUpdates response so that on bot each of our response will appear as reply to user&rsquo;s message.</li>
</ul>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">package</span><span style="font-size:12px;font-family: Menlo;">&nbsp;main</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">import</span><span style="font-size:12px;font-family: Menlo;">&nbsp;(</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;encoding/json&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;io/ioutil&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;log&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;net/http&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;net/url&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;os&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;strconv&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;strings&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Response</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; OK &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">bool</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;ok&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Result []Update&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;result&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Update</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; UpdateID&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;update_id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Message &nbsp;Message&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;message&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Message</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; MessageID&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;message_id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; From &nbsp; &nbsp; &nbsp;User &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;from&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Chat &nbsp; &nbsp; &nbsp;Chat &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;Chat&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Date &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;date&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Text &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;text&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">User</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; ID &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; IsBot &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">bool</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;is_bot&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; FirstName &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;first_name&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; LanguageCode&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;language_code&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">type</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">Chat</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">struct</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; ID &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">int</span><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;id&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; FirstName&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;first_name&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; Type &nbsp; &nbsp; &nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(38, 127, 153);">string</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">`json:&quot;type&quot;`</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;color: blue;">func</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">main</span><span style="font-size:12px;font-family: Menlo;">() {</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">token</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= os.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Getenv</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;TELEGRAM_TOKEN&quot;</span><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;token ==&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Not a valid token&quot;</span><span style="font-size:12px;font-family: Menlo;">)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// getUpdates</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">query</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;https://api.telegram.org/bot&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ token +&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;/getUpdates&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">resp</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= http.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Get</span><span style="font-size:12px;font-family: Menlo;">(query)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during getUpdates: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">return</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">body</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= ioutil.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">ReadAll</span><span style="font-size:12px;font-family: Menlo;">(resp.Body)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= resp.Body.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Close</span><span style="font-size:12px;font-family: Menlo;">()</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during response body close: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Response: &quot;</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">string</span><span style="font-size:12px;font-family: Menlo;">(body))</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">data</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= Response{}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= json.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Unmarshal</span><span style="font-size:12px;font-family: Menlo;">(body, &amp;data)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during response unmarshal: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Response struct: &quot;</span><span style="font-size:12px;font-family: Menlo;">, data)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// sendMessage</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">reply</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">query</span><span style="font-size:12px;font-family: Menlo;">&nbsp;=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;https://api.telegram.org/bot&quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ token +&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;/sendMessage&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">for</span><span style="font-size:12px;font-family: Menlo;">&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">_</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">update</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">range</span><span style="font-size:12px;font-family: Menlo;">&nbsp;data.Result {</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">chatID</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= update.Message.Chat.ID</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">msgID</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= update.Message.MessageID&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// enhancement2</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">inpMsg</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= strings.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">ToLower</span><span style="font-size:12px;font-family: Menlo;">(update.Message.Text)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;strings.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Contains</span><span style="font-size:12px;font-family: Menlo;">(inpMsg,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;hi&quot;</span><span style="font-size:12px;font-family: Menlo;">) {&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// enhancement1</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">reply</span><span style="font-size:12px;font-family: Menlo;">&nbsp;=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;hello&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">else</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">reply</span><span style="font-size:12px;font-family: Menlo;">&nbsp;=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;say hi&quot;</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">vals</span><span style="font-size:12px;font-family: Menlo;">&nbsp;:= url.Values{}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; vals.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Set</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;chat_id&quot;</span><span style="font-size:12px;font-family: Menlo;">, strconv.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Itoa</span><span style="font-size:12px;font-family: Menlo;">(chatID))</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; vals.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Set</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;text&quot;</span><span style="font-size:12px;font-family: Menlo;">, reply)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; vals.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Set</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;reply_to_message_id&quot;</span><span style="font-size:12px;font-family: Menlo;">, strconv.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Itoa</span><span style="font-size:12px;font-family: Menlo;">(msgID))&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: green;">// enhancement2</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">resp</span><span style="font-size:12px;font-family: Menlo;">,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(0, 16, 128);">err</span><span style="font-size:12px;font-family: Menlo;">&nbsp;= http.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">PostForm</span><span style="font-size:12px;font-family: Menlo;">(query, vals)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Print</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Sending reply as &quot;</span><span style="font-size:12px;font-family: Menlo;">, reply,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot; to chatID &quot;</span><span style="font-size:12px;font-family: Menlo;">, chatID,&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;msgID &quot;</span><span style="font-size:12px;font-family: Menlo;">, msgID)</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: rgb(175, 0, 219);">if</span><span style="font-size:12px;font-family: Menlo;">&nbsp;err !=&nbsp;</span><span style="font-size:12px;font-family: Menlo;color: blue;">nil</span><span style="font-size:12px;font-family: Menlo;">&nbsp;{</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Fatal</span><span style="font-size:12px;font-family: Menlo;">(</span><span style="font-size:12px;font-family: Menlo;color: rgb(163, 21, 21);">&quot;Error during sendMessage: &quot;</span><span style="font-size:12px;font-family: Menlo;">&nbsp;+ err.</span><span style="font-size:12px;font-family: Menlo;color: rgb(121, 94, 38);">Error</span><span style="font-size:12px;font-family: Menlo;">())</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">&nbsp; &nbsp; }</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;line-height: 13.5pt;background-color: white;'><span style="font-size:12px;font-family: Menlo;">}</span></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><u>OUTPUT:</u></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>RATHEGS-M-C3XA:src rathegs$ go run main.go</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 18:00:36 Response: {&quot;ok&quot;:true,&quot;result&quot;:[{&quot;update_id&quot;:332016300,</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&quot;message&quot;:{&quot;message_id&quot;:54,&quot;from&quot;:{&quot;id&quot;:1060392138,&quot;is_bot&quot;:false,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;language_code&quot;:&quot;en&quot;},&quot;chat&quot;:{&quot;id&quot;:1060392138,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;type&quot;:&quot;private&quot;},&quot;date&quot;:1588406550,&quot;text&quot;:&quot;yo&quot;}},{&quot;update_id&quot;:332016301,</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&quot;message&quot;:{&quot;message_id&quot;:55,&quot;from&quot;:{&quot;id&quot;:1060392138,&quot;is_bot&quot;:false,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;language_code&quot;:&quot;en&quot;},&quot;chat&quot;:{&quot;id&quot;:1060392138,&quot;first_name&quot;:&quot;Rathega&quot;,&quot;type&quot;:&quot;private&quot;},&quot;date&quot;:1588406550,&quot;text&quot;:&quot;hi&quot;}}]}</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 18:00:36 Response struct: {true [{332016300 {54 {1060392138 false Rathega en} {1060392138 Rathega private} 1588406550 yo}} {332016301 {55 {1060392138 false Rathega en} {1060392138 Rathega private} 1588406550 hi}}]}</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 18:00:37 Sending reply as say hi to chatID 1060392138msgID 54</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>2020/05/02 18:00:38 Sending reply as hello to chatID 1060392138msgID 55</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>The above program sends <em>hello</em> only when <em>hi</em> is sent or will reply as <em>say hi</em></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'><img border="0" width="380" height="261" src="/Users/rathegs/Desktop/image2.png" alt="A screenshot of a cell phone screen with bot screen"></p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;font-weight: bold;'>Notes:</p>
<ul style="list-style-type: undefined;margin-left:undefined;font-size: large;">
    <li>This program needs to be structured and updates from getUpdates should be processed via channels to maintain ordering and should be put in an infinite for loop for continuously processing user requests.</li>
    <li>Also while doing GET on getUpdates please take care of setting <span style='font-size:14px;font-family: "Lucida Grande", sans-serif;'>update_id</span> field by taking reference from manual otherwise in infinite for loop we will end up processing same messages infinite times.</li>
</ul>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>This basic experiment helped me on how to read the telegram bot API manual and implement the required functionalities. Hope it helps someone!</p>
<p style='margin:0cm;margin-bottom:.0001pt;font-size: medium;font-family:"Calibri",sans-serif;'>&nbsp;</p>